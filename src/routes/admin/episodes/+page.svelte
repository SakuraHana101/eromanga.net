<script lang="ts">
  export let data;

  // ‡∏î‡∏∂‡∏á episodes ‡∏à‡∏≤‡∏Å server
  const episodes = data.episodes;
</script>

<h1 class="text-2xl font-bold mb-4">üìÑ ‡∏ï‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>

<table class="w-full table-auto border">
  <thead class="bg-gray-200 text-left">
    <tr>
      <th class="p-2 border">‡∏°‡∏±‡∏á‡∏á‡∏∞</th>
      <th class="p-2 border">‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ô</th>
      <th class="p-2 border">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
      <th class="p-2 border">‡∏•‡∏¥‡∏á‡∏Å‡πå</th>
      <th class="p-2 border">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
    </tr>
  </thead>
  <tbody>
    {#each episodes as ep}
      <tr class="border-t hover:bg-gray-50">
        <td class="p-2 border">{ep.manga?.title}</td>
        <td class="p-2 border">{ep.title}</td>
        <td class="p-2 border">{new Date(ep.createdAt).toLocaleDateString()}</td>
        <td class="p-2 border">
          <a
            href={`/manga/${ep.mangaId}/${ep.episodeId}`}
            target="_blank"
            class="text-blue-600 underline"
            >‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ï‡∏≠‡∏ô</a
          >
        </td>
        <td class="p-2 border">
          <form method="POST" action="/admin/actions/delete-episode">
            <input type="hidden" name="id" value={ep.id} />
            <button class="text-red-600 text-sm hover:underline">‡∏•‡∏ö</button>
          </form>
        </td>
      </tr>
    {/each}
  </tbody>
</table>
